class GlozinProductGridHandler extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{container:".glozin-product-grid"}}}getDefaultElements(){const e=this.getSettings("selectors");return{$container:this.$element.find(e.container)}}loadProductsGrid(){var n=this;this.elements.$container.on("click","a.ajax-load-products",function(e){e.preventDefault();var t=jQuery(this);if(t.hasClass("loading")){return}t.addClass("loading");n.loadProducts(t)})}loadProductsInfinite(){var o=this;if(!this.elements.$container.find(".woocommerce-pagination").hasClass("woocommerce-pagination--infinite")){return}var a=this.elements.$container.find(".woocommerce-pagination-button"),i=false;jQuery(window).on("scroll",function(){if(i||!a.length||!a.is(":visible")){return}var e=a.offset().top,t=jQuery(window).height(),n=jQuery(window).scrollTop();if(n+t>=e){i=true;if(!a.hasClass("loading")){a.addClass("loading");o.loadProducts(a)}setTimeout(function(){i=false;if(!a.is(":visible")){jQuery(window).off("scroll")}},300)}})}loadProducts(d){var e="";if(typeof glozinData!=="undefined"){e=glozinData.ajax_url}else if(typeof wc_add_to_cart_params!=="undefined"){e=wc_add_to_cart_params.wc_ajax_url}const t=this.getElementSettings();if(!e){return}jQuery.post(e.toString().replace("%%endpoint%%","glozin_elementor_load_products"),{page:d.attr("data-page"),settings:t},function(e){if(!e){return}d.removeClass("loading");var t=jQuery(e.data),o=t.find("li.product"),n=d.closest(".glozin-product-grid"),a=n.find("ul.products"),i=t.find(".page-number").data("page");if(o.length){o.addClass("gz-fadeinup gz-animated");let n=.5;o.each(function(e,t){jQuery(t).css("--gz-fadeinup-delay",n+"s");n=n+.1});a.append(o);if(i=="0"){d.remove()}else{d.attr("data-page",i)}}if(e.success){if(o.hasClass("gz-animated")){setTimeout(function(){o.removeClass("gz-animated")},10)}}jQuery(document.body).trigger("glozin_products_loaded",[o,true])})}lazyLoadImage(){const e=this.$element.find(".gz-lazy-load-image");e.each(function(){const e=jQuery(this);const t=e.parent();t.imagesLoaded(function(){t.closest(".gz-lazy-load").removeClass("gz-lazy-load");t.trigger("glozin_lazy_load_image_loaded")})})}onInit(){var o=this;super.onInit();o.loadProductsGrid();o.loadProductsInfinite();jQuery(document.body).on("glozin_products_loaded",(e,t,n)=>{o.lazyLoadImage()})}}jQuery(window).on("elementor/frontend/init",()=>{elementorFrontend.hooks.addAction("frontend/element_ready/glozin-product-grid.default",e=>{elementorFrontend.elementsHandler.addHandler(GlozinProductGridHandler,{$element:e})})});