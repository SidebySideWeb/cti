class GlozinProductTabsWidgetHandler extends elementorModules.frontend.handlers.Base{getDefaultSettings(){return{selectors:{tab:".glozin-product-tabs__heading span",panel:".glozin-product-tabs__item",products:"ul.products"}}}getDefaultElements(){const e=this.getSettings("selectors");return{$tabs:this.findElement(e.tab),$panels:this.findElement(e.panel),$products:this.findElement(e.products)}}activateDefaultTab(){const e=this.getEditSettings("activeItemIndex")||1;if(this.isEdit){jQuery(document.body).trigger("glozin_get_products_ajax_loaded",[this.elements.$products.find("li.product"),false])}this.changeActiveTab(e)}changeActiveTab(e){if(this.isActiveTab(e)){return}const t=this.getTab(e),s=this.getPanel(e);t.addClass("active").siblings(".active").removeClass("active");if(s.length){s.siblings(".active").removeClass("active").addClass("waiting");setTimeout(function(){s.removeClass("no-active").addClass("active");s.parent().find(".waiting").removeClass("waiting").addClass("no-active")},300)}else{this.loadNewPanel(e)}}isActiveTab(e){return this.getTab(e).hasClass("active")}hasTabPanel(e){return this.getPanel(e).length}getTab(e){return this.elements.$tabs.filter('[data-target="'+e+'"]')}getPanel(e){return this.elements.$panels.filter('[data-panel="'+e+'"]')}loadNewPanel(s){if(this.hasTabPanel(s)){return}const a=this.isEdit,e=this.elements.$tabs.filter('[data-target="'+s+'"]'),i=this.elements.$panels.first().parent(),t=e.data("atts");if(!t){return}var n=this;var r="";if(typeof glozinData!=="undefined"){r=glozinData.ajax_url}else if(typeof wc_add_to_cart_params!=="undefined"){r=wc_add_to_cart_params.wc_ajax_url}if(!r){return}r=r.toString().replace("%%endpoint%%","glozin_get_products_tab");i.addClass("loading");jQuery.post(r,{action:"glozin_get_products_tab",atts:t},e=>{if(!e.success){i.removeClass("loading");return}const t=this.elements.$panels.first().clone();t.html(e.data);t.attr("data-panel",s);t.removeClass("no-active").addClass("active");t.appendTo(i);t.siblings(".active").removeClass("active").addClass("no-active");this.elements.$panels=this.elements.$panels.add(t);n.loadProductsInfinite();if(!a){jQuery(document.body).trigger("glozin_get_products_ajax_loaded",[t.find("li.product"),false])}if(e.success){i.removeClass("loading")}})}loadMoreProducts(){var a=this;this.$element.on("click",".woocommerce-pagination a",function(e){e.preventDefault();var t=jQuery(this),s=jQuery(this).closest(".woocommerce-pagination-button");if(s.hasClass("loading")){return}s.addClass("loading");a.loadProducts(t)})}loadProductsInfinite(){var a=this;if(!this.elements.$panels.find(".woocommerce-pagination").hasClass("woocommerce-pagination--infinite")){return}var i=this.elements.$panels.find(".woocommerce-pagination-button"),n=false;jQuery(window).on("scroll",function(){if(n||!i.length||!i.is(":visible")){return}var e=i.offset().top,t=jQuery(window).height(),s=jQuery(window).scrollTop();if(s+t>=e){n=true;if(!i.hasClass("loading")){i.addClass("loading");a.loadProducts(i)}setTimeout(function(){n=false;if(!i.is(":visible")){jQuery(window).off("scroll")}},300)}})}loadProducts(r){var e=glozinData.ajax_url.toString().replace("%%endpoint%%","glozin_elementor_load_products"),t=r.closest(".glozin-product-tabs__item").attr("data-panel"),s=r.closest(".glozin-product-tabs").find("span[data-target='"+t+"']").data("atts");if(!e){return}jQuery.post(e,{page:r.attr("data-page"),settings:s},function(e){if(!e){return}r.closest(".woocommerce-pagination-button").removeClass("loading");var t=jQuery(e.data),a=t.find("li.product"),s=r.closest(".glozin-product-tabs__item"),i=s.find("ul.products"),n=t.find(".page-number").data("page");if(a.length){a.addClass("gz-fadeinup gz-animated");let s=.5;a.each(function(e,t){jQuery(t).css("--gz-fadeinup-delay",s+"s");s=s+.1});i.append(a);if(n=="0"){r.closest(".woocommerce-pagination").remove()}else{r.attr("data-page",n)}}if(e.success){if(a.hasClass("gz-animated")){setTimeout(function(){a.removeClass("gz-animated")},10)}}jQuery(document.body).trigger("glozin_get_products_ajax_loaded",[a,true])})}bindEvents(){this.elements.$tabs.on({click:e=>{e.preventDefault();this.changeActiveTab(e.currentTarget.getAttribute("data-target"))}})}onInit(...e){super.onInit(...e);this.activateDefaultTab();this.loadMoreProducts();this.loadProductsInfinite()}}class GlozinProductTabsCarouselWidgetHandler extends elementorModules.frontend.handlers.CarouselBase{getDefaultSettings(){const e=super.getDefaultSettings();e.selectors.carousel=".glozin-product-tabs-carousel__item .swiper";e.selectors.swiperWrapper=".products";e.selectors.slideContent=".product";e.selectors.swiperArrow=this.$element.find(".glozin-product-tabs-carousel__item .swiper-arrows .swiper-button").get(0);e.selectors.tab=".glozin-product-tabs-carousel__heading span";e.selectors.panel=".glozin-product-tabs-carousel__item";e.selectors.products="ul.products";return e}getDefaultElements(){const e=this.getSettings("selectors"),t=super.getDefaultElements();t.$tabs=this.$element.find(e.tab);t.$panels=this.$element.find(e.panel);t.$products=this.$element.find(e.products);return t}getSwiperSettings(){const e=this,t=super.getSwiperSettings(),s=this.getElementSettings(),a=+s.slides_to_show||4,i=1===a,n=elementorFrontend.config.responsive.activeBreakpoints,r={mobile:2,tablet:i?1:3};let o={};let l=a;var d=s.image_spacing_custom?parseInt(s.image_spacing_custom):0;t.spaceBetween=s.custom_space_between=="yes"?0:d;var c=false;Object.keys(n).forEach(e=>{if(n[e].value!==n[e].default_value){return}n[e].value=parseInt(n[e].value)+1;c=true});if(c){Object.keys(n).reverse().forEach(e=>{const t=r[e]?r[e]:l;o[n[e].value]={slidesPerView:+s["slides_to_show_"+e]||t,slidesPerGroup:+s["slides_to_scroll_"+e]||1};if(s.image_spacing_custom){o[n[e].value].spaceBetween=s.custom_space_between=="yes"?0:this.getSpaceBetween(e)}l=+s["slides_to_show_"+e]||t});t.breakpoints=o}if(s.slides_rows&&parseInt(s.slides_rows)>1){t.grid={fill:"row",rows:s.slides_rows}}Object.keys(n).forEach(e=>{if(s.custom_space_between=="yes"){t.breakpoints[n[e].value].spaceBetween=0}else{t.breakpoints[n[e].value].spaceBetween=s["image_spacing_custom_"+e]?s["image_spacing_custom_"+e]:d}if(e=="mobile"&&s["slidesperview_auto_mobile"]=="yes"){t.breakpoints[n[e].value].slidesPerView=1.5}if(s.slides_rows&&s.slides_rows>1){t.breakpoints[n[e].value].grid={fill:"row",rows:s["slides_rows_"+e]?s["slides_rows_"+e]:s.slides_rows}}if(s.custom_space_between=="yes"){t.breakpoints[n[e].value].spaceBetween=0}});t.navigation.nextEl=this.elements.$panels.find(".elementor-swiper-button-next").get(0);t.navigation.prevEl=this.elements.$panels.find(".elementor-swiper-button-prev").get(0);t.pagination.el=this.elements.$panels.find(".swiper-pagination").get(0);t.on.resize=function(){var s=this,a=this.$el.closest(".glozin-product-tabs-carousel").find(".product-thumbnail");if(a.length>0){jQuery(this.$el).imagesLoaded(function(){var e=a.outerHeight(),t=e/2+15+"px";jQuery(s.navigation.$nextEl).css({"--gz-arrow-top":t});jQuery(s.navigation.$prevEl).css({"--gz-arrow-top":t})})}};return t}activateDefaultTab(){const e=this.getEditSettings("activeItemIndex")||1;if(this.isEdit){jQuery(document.body).trigger("glozin_get_products_ajax_loaded",[this.elements.$products.find("li.product"),false])}this.changeActiveTab(e)}changeActiveTab(e){if(this.isActiveTab(e)){return}const t=this.getTab(e),s=this.getPanel(e);t.addClass("active").siblings(".active").removeClass("active");if(s.length){s.siblings(".active").removeClass("active").addClass("waiting");setTimeout(function(){s.removeClass("no-active").addClass("active");s.parent().find(".waiting").removeClass("waiting").addClass("no-active")},300);s.find(".swiper-slide").removeAttr("inert")}else{this.loadNewPanel(e)}}isActiveTab(e){return this.getTab(e).hasClass("active")}hasTabPanel(e){return this.getPanel(e).length}getTab(e){return this.elements.$tabs.filter('[data-target="'+e+'"]')}getPanel(e){return this.elements.$panels.filter('[data-panel="'+e+'"]')}loadNewPanel(n){const r=this;if(r.hasTabPanel(n)){return}const o=r.isEdit,e=r.elements.$tabs.filter('[data-target="'+n+'"]'),l=r.elements.$panels.first().parent(),t=e.data("atts");if(!t){return}var s="";if(typeof glozinData!=="undefined"){s=glozinData.ajax_url}else if(typeof wc_add_to_cart_params!=="undefined"){s=wc_add_to_cart_params.wc_ajax_url}if(!s){return}s=s.toString().replace("%%endpoint%%","glozin_get_products_tab");l.addClass("loading");jQuery.post(s,{action:"glozin_get_products_tab",atts:t},e=>{if(!e.success){l.removeClass("loading");return}const a=r.elements.$panels.first().clone();a.html(e.data);a.attr("data-panel",n);a.removeClass("no-active").addClass("active");a.appendTo(l);a.siblings(".active").removeClass("active").addClass("no-active");if(e.data.error){a.html(e.data.error);r.elements.$panels=r.elements.$panels.add(a);l.removeClass("loading");return}else{r.elements.$panels=r.elements.$panels.add(a)}if(!o){jQuery(document.body).trigger("glozin_get_products_ajax_loaded",[a.find("li.product"),false])}if(!e.data){l.removeClass("loading");return}var t=r.$element.find(".swiper-original");a.children().wrapAll('<div class="swiper"></div>');jQuery.each(t[0].attributes,function(){if(this.name!=="class"&&this.name!=="id"){a.find(".swiper").attr(this.name,this.value)}if(this.name=="class"){a.find(".swiper").addClass(this.value)}});a.find(".swiper").removeClass("swiper-original hidden");a.find(".swiper").append(r.$element.find(".navigation-original .swiper-arrows").clone());a.find(".swiper").append(r.$element.find(".navigation-original .swiper-pagination").clone());a.find(".products").addClass("swiper-wrapper");a.find(".product").addClass("swiper-slide");const s=elementorFrontend.utils.swiper,i=jQuery.merge(r.getSwiperSettings(),super.getSwiperSettings());i.navigation.nextEl=a.find(".elementor-swiper-button-next").get(0);i.navigation.prevEl=a.find(".elementor-swiper-button-prev").get(0);i.pagination.el=a.find(".swiper-pagination").get(0);i.on.resize=function(){var s=a.find(".product-thumbnail");if(s.length>0){a.imagesLoaded(function(){var e=s.outerHeight(),t=e/2+15+"px";a.find(".elementor-swiper-button-next").css({"--gz-arrow-top":t});a.find(".elementor-swiper-button-prev").css({"--gz-arrow-top":t})})}};new s(a.find(".swiper").get(0),i);if(e.success){l.removeClass("loading")}})}bindEvents(){this.elements.$tabs.on({click:e=>{e.preventDefault();this.changeActiveTab(e.currentTarget.getAttribute("data-target"))}})}initSwiper(){this.elements.$panels.find(".swiper").append(this.$element.find(".navigation-original .swiper-arrows").clone());this.elements.$panels.find(".swiper").append(this.$element.find(".navigation-original .swiper-pagination").clone());this.elements.$panels.find(".products").addClass("swiper-wrapper");this.elements.$panels.find(".product").addClass("swiper-slide");super.initSwiper();this.elements.$swiperContainer.find(".products").attr("role","list");this.elements.$swiperContainer.find(".product").each(function(){jQuery(this).attr("role","listitem")})}onInit(){super.onInit();this.activateDefaultTab();this.glozinUpdateSwiper()}glozinUpdateSwiper(){const e=this.$element.find(".swiper").get(0)?.swiper;if(!e){return}const t=this.getElementSettings();e.params.breakpoints[elementorFrontend.config.responsive.activeBreakpoints["tablet"].value].spaceBetween=t.custom_space_between=="yes"?0:this.getSpaceBetween("desktop");if(t.slides_rows&&parseInt(t.slides_rows)>1){e.params.breakpoints[elementorFrontend.config.responsive.activeBreakpoints["tablet"].value].grid={fill:"row",rows:t.slides_rows}}e.update()}a11ySetSlideAriaHidden(e=""){const t="initialisation"===e?0:this.swiper?.activeIndex;if("number"!==typeof t){return}const s=this.elements.$swiperContainer.find(this.getSettings("selectors").slideContent);s.each((e,t)=>{t.removeAttribute("inert")})}}jQuery(window).on("elementor/frontend/init",()=>{elementorFrontend.hooks.addAction("frontend/element_ready/glozin-product-tabs.default",e=>{elementorFrontend.elementsHandler.addHandler(GlozinProductTabsWidgetHandler,{$element:e})});elementorFrontend.hooks.addAction("frontend/element_ready/glozin-product-tabs-carousel.default",e=>{elementorFrontend.elementsHandler.addHandler(GlozinProductTabsCarouselWidgetHandler,{$element:e})});elementorFrontend.hooks.addAction("frontend/element_ready/glozin-product-sale-tabs.default",e=>{elementorFrontend.elementsHandler.addHandler(GlozinProductTabsCarouselWidgetHandler,{$element:e})})});