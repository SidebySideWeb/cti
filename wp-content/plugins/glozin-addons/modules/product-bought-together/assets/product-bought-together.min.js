(function(S){"use strict";function i(){S("#glozin-product-pbt .product-select--list .product-select__check").on("click",".select",function(t){var i=S(this).closest(".product-select--list"),s=i.attr("data-id");if(i.hasClass("product-primary")){return false}S(this).closest(".product-select--list").toggleClass("uncheck");S(this).toggleClass("active");S(this).closest(".glozin-product-pbt__lists").siblings(".glozin-product-pbt__products").find("#pbt-product-"+s+" .product-select a").trigger("click")});S("#glozin-product-pbt .product-select").on("click","a",function(t){t.preventDefault();var i=S(this).closest("#glozin-product-pbt"),s=S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find('.product-select--list[data-id="'+S(this).attr("data-id")+'"]'),e=i.find("#glozin-data_subtotal"),a=i.find("#glozin-data_price"),o=i.find("#glozin-data_save_price"),r=i.find(".glozin-pbt-subtotal"),d=i.find(".glozin-pbt-subtotal .woocommerce-Price-amount"),c=i.find(".glozin-pbt-save-price :not(.woocommerce-price-suffix) .woocommerce-Price-amount"),n=i.find(".glozin-pbt-save-price .percent"),l=i.find(".glozin-pbt-total-price"),p=i.find(".glozin-pbt-total-price .woocommerce-Price-amount"),u=i.find('input[name="glozin_pbt_ids"]'),f=i.find(".glozin-pbt-add-to-cart"),h=i.find('li.product[data-type="variable"]'),_=i.find('input[name="glozin_variation_id"]'),g=i.find(".price-box__total .woocommerce-price-suffix .woocommerce-Price-amount"),v=i.find(".price-box__total-save-price"),m=parseFloat(i.find("#glozin-data_subtotal").attr("data-price")),b=parseFloat(i.find("#glozin-data_price").attr("data-price")),z=parseFloat(i.find("#glozin-data_save_price").attr("data-price")),C=parseFloat(i.find("#glozin-data_discount-all").data("discount")),w=parseFloat(i.find("#glozin-data_quantity-discount-all").data("quantity")),y=S(this).closest(".product-select").find(".s-price").attr("data-price"),k="",x="",F=[];if(S(this).closest(".product-select").hasClass("product-current")){return false}S(this).closest(".product-select").toggleClass("uncheck");s.toggleClass("uncheck");if(s.hasClass("uncheck")){s.find('[type="checkbox"]').prop("checked",false)}else{s.find('[type="checkbox"]').prop("checked",true)}var P=0;i.find(".product-select").each(function(){if(!S(this).hasClass("uncheck")&&!S(this).closest("li.product").hasClass("out-of-stock")){if(S(this).hasClass("product-current")){k=S(this).find(".product-id").attr("data-id")}else{k+=","+S(this).find(".product-id").attr("data-id")}if(parseFloat(S(this).find(".product-id").attr("data-id"))!==0&&parseFloat(S(this).find(".s-price").attr("data-price"))!==0){F[P]=S(this).find(".product-id").attr("data-id")}P++}});F=jQuery.grep(F,function(t){return t});h.find(".product-select").each(function(){if(!S(this).hasClass("uncheck")&&!S(this).closest("li.product").hasClass("out-of-stock")){x+=S(this).find(".product-id").attr("data-id")+","}if(!x){x=0}});_.attr("value",x);u.attr("value",k);f.attr("value",k);if(!S(this).closest("li.product").hasClass("out-of-stock")){if(S(this).closest(".product-select").hasClass("uncheck")){S(this).closest("li.product").addClass("un-active");m-=parseFloat(y);z-=D(parseFloat(y-y/100*C),glozinPbt.price_decimals)}else{S(this).closest("li.product").removeClass("un-active");m+=parseFloat(y);z+=D(parseFloat(y-y/100*C),glozinPbt.price_decimals)}}if(C||C!==0){if(w<=F.length){e.attr("data-price",m);d.html(q(m));c.html(q(z));n.text(C);p.html(q(z));a.attr("data-price",m-z);o.attr("data-price",z);S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".price-new").removeClass("hidden");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".price-ori").addClass("hidden");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".product-price-new").siblings("div.price").addClass("hidden");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".product-variation-price").addClass("active");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".product-variation-price .price").addClass("hidden");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".product-variation-price .price-variation-new").removeClass("hidden");if(v.hasClass("hidden")){v.removeClass("hidden")}l.addClass("ins");r.removeClass("hidden")}else{e.attr("data-price",m);d.html(q(m));c.html(q(0));n.text(0);p.html(q(m));a.attr("data-price",m);o.attr("data-price",z);if(!v.hasClass("hidden")){v.addClass("hidden")}v.find(".woocommerce-Price-amount").html(q(m-z));S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".price-new").addClass("hidden");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".price-ori").removeClass("hidden");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".product-variation-price").removeClass("active");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".product-variation-price .price").removeClass("hidden");S(this).closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find(".product-variation-price .price-variation-new").addClass("hidden");l.removeClass("ins");r.addClass("hidden")}}else{p.html(q(b));a.attr("data-price",b);o.attr("data-price",z);if(m>a.attr("data-price")){l.addClass("ins");r.removeClass("hidden")}else{l.removeClass("ins");r.addClass("hidden")}}var L=0,j=[],A=0;S(this).closest("ul.products").find("li.product").each(function(){var t=parseFloat(S(this).find(".price:not(.hidden) .woocommerce-price-suffix .woocommerce-Price-amount").text().split(glozinPbt.currency_symbol).join(""));if(S(this).attr("data-type")=="variable"){if(S(this).find(".product-variation-price").hasClass("active")){t=parseFloat(S(this).find(".product-variation-price .price.price-variation-new .woocommerce-price-suffix .woocommerce-Price-amount").text().split(glozinPbt.currency_symbol).join(""))}else{t=parseFloat(S(this).find(".product-variation-price .price:not(.price-variation-new) .woocommerce-price-suffix .woocommerce-Price-amount").text().split(glozinPbt.currency_symbol).join(""))}if(!S(this).find(".variation-attribute").first().val()||S(this).hasClass("out-of-stock")){t=0}}if(!S(this).hasClass("un-active")&&!isNaN(t)){j[A]=t;A++}});L=j.reduce((t,i)=>t+i,0);g.html(q(L));N(i);M();if(S(this).closest("li.product").data("type")=="variable"){S(".variations_form select").trigger("change")}})}function s(){S("#glozin-product-pbt").find(".variations_form").on("change","select",function(t){var i=S(this).closest(".glozin-product-pbt__wrapper"),s=S(this).closest("form"),e=S("option:selected",this),a=s.data("product_id"),o=e.data("attributes"),r=e.data("stock"),d=S(this).closest(".glozin-product-pbt__wrapper").find("#pbt-product-"+a+" .woocommerce-loop-product__title .product-select__name"),c=S(this).closest(".glozin-product-pbt__wrapper").find('.product-select--list[data-id="'+a+'"] .product-select__name');if(r){if(r.stock!=="in_stock"){if(d.find("span.stock").length>0){d.find("span.stock").text(" - "+r.button_text)}else{d.append('<span class="stock"> - '+r.button_text+"</span>");d.closest("li.product").addClass("out-of-stock")}if(c.find("span.stock").length>0){c.find("span.stock").text(" - "+r.button_text)}else{c.append('<span class="stock"> - '+r.button_text+"</span>");c.closest(".product-select--list").addClass("out-of-stock")}}else{d.find("span.stock").remove();d.closest("li.product").removeClass("out-of-stock");c.find("span.stock").remove();c.closest(".product-select--list").removeClass("out-of-stock")}}else{if(d.find("span.stock").length>0){d.closest("li.product").removeClass("out-of-stock")}d.find("span.stock").remove();if(c.find("span.stock").length>0){c.closest(".product-select--list").removeClass("out-of-stock")}c.find("span.stock").remove()}if(o!==undefined){for(var n in o){s.find('input[name="'+n+'"]').val(o[n])}h(i,e,a)}else{s.find("input").val("");_(i,e,a)}var l=i.find(".price-box__total .woocommerce-price-suffix .woocommerce-Price-amount"),p=0,u=[],f=0;i.find("li.product").each(function(){var t=parseFloat(S(this).find(".price:not(.hidden) .woocommerce-price-suffix .woocommerce-Price-amount").text().split(glozinPbt.currency_symbol).join(""));if(S(this).attr("data-type")=="variable"){if(S(this).find(".product-variation-price").hasClass("active")){t=parseFloat(S(this).find(".product-variation-price .price.price-variation-new .woocommerce-price-suffix .woocommerce-Price-amount").text().split(glozinPbt.currency_symbol).join(""))}else{t=parseFloat(S(this).find(".product-variation-price .price:not(.price-variation-new) .woocommerce-price-suffix .woocommerce-Price-amount").text().split(glozinPbt.currency_symbol).join(""))}if(!S(this).find(".variation-attribute").first().val()||S(this).hasClass("out-of-stock")){t=0}}if(!S(this).hasClass("un-active")&&!isNaN(t)){u[f]=t;f++}});p=u.reduce((t,i)=>t+i,0);l.html(q(p));M()});S(".variations_form select").trigger("change")}function h(t,i,s){if(i.closest(".glozin-product-pbt__products").length>0){var e=i.closest("li.product"),a=i.closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find('.product-select--list[data-id="'+s+'"]'),o=i.closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find('.product-select--list[data-id="'+s+'"] div.price')}else{var e=i.closest(".glozin-product-pbt__lists").siblings(".glozin-product-pbt__products").find("#pbt-product-"+s),a=i.closest(".product-select--list"),o=i.closest(".product-select--list").find("div.price")}var r=e.find("div.price"),d=e.find(".s-price"),c=e.find(".s-attrs"),n=e.find(".product-id"),l=t.find(".glozin-pbt-add-to-cart"),p=i.attr("value"),u=i.data("price"),f=i.data("price_html"),h=i.data("attributes"),_=i.data("image"),g=e.find(".thumbnail .thumb-ori img").attr("src");if(e.length){if(l.val()==0){l.attr("value",n)}if(e.attr("data-type")=="variable"){d.attr("data-price",u)}n.attr("data-id",p);if(e.find(".product-select").hasClass("product-current")){t.find(".glozin_variation_id").attr("value",p)}if(_&&_!==g){e.find(".thumbnail .thumb-ori").css("opacity","0");e.find(".thumbnail .thumb-new").html('<img src="'+_+'" srcset="'+_+'"/>').css("opacity","1")}c.attr("data-attrs",JSON.stringify(h))}if(f){if(r.hasClass("hidden")&&o.hasClass("hidden")){e.find(".product-variation-price").remove();a.find(".product-variation-price").remove()}else{r.addClass("hidden");o.addClass("hidden")}if(e.find(".product-price-new").length&&a.find(".product-price-new").length){e.find(".product-price-new").html(f);a.find(".product-price-new").html(f)}else{r.after('<div class="product-price-new">'+f+"</div>");o.after('<div class="product-price-new">'+f+"</div>")}}v(e,a,p)}function _(t,i,s){if(i.closest(".glozin-product-pbt__products").length>0){var e=i.closest("li.product"),a=i.closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find('.product-select--list[data-id="'+s+'"]'),o=i.closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find('.product-select--list[data-id="'+s+'"] div.price')}else{var e=i.closest(".glozin-product-pbt__lists").siblings(".glozin-product-pbt__products").find("#pbt-product-"+s),a=i.closest(".product-select--list"),o=i.closest(".product-select--list").find("div.price")}var r=e.find("div.price"),d=e.find(".s-price"),c=e.find(".s-attrs"),n=parseFloat(e.find(".s-price").attr("data-price")),l=e.find(".product-id"),p=parseFloat(t.find("#glozin-data_subtotal").attr("data-price")),u=t.find("#glozin-data_subtotal"),f=e.find(".thumbnail .thumb-new img").attr("src"),h=e.find(".thumbnail .thumb-ori img").attr("src");if(e.length){l.attr("data-id",0);c.attr("data-attrs","");if(f!==h){e.find(".thumbnail .thumb-new").css("opacity","0");e.find(".thumbnail .thumb-ori").css("opacity","1")}if(e.attr("data-type")=="variable"){d.attr("data-price",0)}if(e.find(".product-select").hasClass("product-current")){t.find(".glozin_variation_id").attr("value",0)}u.attr("data-price",p-n)}if(r.hasClass("hidden")&&o.hasClass("hidden")){r.removeClass("hidden");o.removeClass("hidden");e.find(".product-price-new").remove();e.find(".product-variation-price").remove();a.find(".product-price-new").remove();a.find(".product-variation-price").remove()}v(e,a,l.attr("data-id"))}function v(t,i,s=0){if(t.attr("data-type")!=="variable"){return}if(t.find(".product-select").hasClass("unckeck")){return}var e=t.closest("#glozin-product-pbt"),a=e.find("li.product"),o=e.find('li.product[data-type="variable"]'),r=e.find(".glozin-pbt-subtotal"),d=e.find(".glozin-pbt-subtotal .woocommerce-Price-amount"),c=e.find(".glozin-pbt-total-price"),n=e.find(".glozin-pbt-total-price .woocommerce-Price-amount"),l=e.find(".glozin-pbt-save-price :not(.woocommerce-price-suffix) .woocommerce-Price-amount"),p=e.find('input[name="glozin_variation_id"]'),u=e.find('input[name="glozin_pbt_ids"]'),f=e.find('input[name="glozin_variation_attrs"]'),h=e.find(".glozin-pbt-add-to-cart"),_=e.find(".glozin-pbt-save-price .percent"),g=e.find("#glozin-data_subtotal"),v=e.find("#glozin-data_price"),m=e.find("#glozin-data_save_price"),b=e.find("#glozin-data_save-price"),z=e.find(".price-box__total-save-price"),C=parseFloat(e.find("#glozin-data_discount-all").data("discount")),w=parseFloat(e.find("#glozin-data_quantity-discount-all").data("quantity")),y=parseFloat(e.find('input[name="glozin_product_id"]').val()),k=p.val(),x=parseFloat(e.find("#glozin-data_subtotal").attr("data-price")),F=parseFloat(e.find("#glozin-data_save-price").attr("data-price")),P={},L="",j="",A=0,N=0,M=[];var O=0;e.find(".product-select").each(function(){if(!S(this).hasClass("uncheck")&&!S(this).closest("li.product").hasClass("out-of-stock")){if(S(this).hasClass("product-current")){L=S(this).find(".product-id").attr("data-id")}else{L+=","+S(this).find(".product-id").attr("data-id")}if(parseFloat(S(this).find(".product-id").attr("data-id"))!==0&&parseFloat(S(this).find(".s-price").attr("data-price"))!==0){M[O]=S(this).find(".product-id").attr("data-id")}O++}});M=jQuery.grep(M,function(t){return t});u.attr("value",L);h.attr("value",L);if(k==0&&!t.hasClass("out-of-stock")){p.attr("value",s);P[s]=t.find(".s-attrs").attr("data-attrs");f.attr("value",JSON.stringify(P))}else{o.find(".product-select").each(function(){if(!S(this).hasClass("uncheck")&&!S(this).closest("li.product").hasClass("out-of-stock")){var t=S(this).find(".product-id").attr("data-id"),i=S(this).find(".s-attrs").attr("data-attrs");j+=t+",";P[t]=i}});p.attr("value",j);f.attr("value",JSON.stringify(P))}a.find(".product-select").each(function(){if(!S(this).hasClass("uncheck")&&!S(this).closest("li.product").hasClass("out-of-stock")){var t=S(this).find(".s-price").attr("data-price");A+=parseFloat(t);if(C>0){N+=D(parseFloat(t)-parseFloat(t)/100*C,glozinPbt.price_decimals)}}});x=A;if(C!==0&&w<=M.length){F=x-N;_.text(C);if(z.hasClass("hidden")){z.removeClass("hidden")}t.closest("ul.products").find(".price-ori").addClass("hidden");t.closest("ul.products").find(".price-new").removeClass("hidden");i.closest(".glozin-product-pbt__lists").find(".price-ori").addClass("hidden");i.closest(".glozin-product-pbt__lists").find(".price-new").removeClass("hidden");c.addClass("ins");r.removeClass("hidden")}else{F=0;_.text(0);c.removeClass("ins");r.addClass("hidden");if(!z.hasClass("hidden")){z.addClass("hidden")}t.closest("ul.products").find(".price-ori").removeClass("hidden");t.closest("ul.products").find(".price-new").addClass("hidden");i.closest(".glozin-product-pbt__lists").find(".price-ori").removeClass("hidden");i.closest(".glozin-product-pbt__lists").find(".price-new").addClass("hidden")}if(y==0){F=0;if(k!==0&&w<=M.length){F=x-N;_.text(C);if(z.hasClass("hidden")){z.removeClass("hidden")}t.closest("ul.products").find(".product-variation-price").addClass("active");t.closest("ul.products").find(".product-variation-price .price").addClass("hidden");t.closest("ul.products").find(".product-variation-price .price-variation-new").removeClass("hidden");i.closest(".glozin-product-pbt__lists").find(".product-variation-price").addClass("active");i.closest(".glozin-product-pbt__lists").find(".product-variation-price .price").addClass("hidden");i.closest(".glozin-product-pbt__lists").find(".product-variation-price .price-variation-new").removeClass("hidden")}else{if(!z.hasClass("hidden")){z.addClass("hidden")}t.closest("ul.products").find(".product-variation-price").removeClass("active");t.closest("ul.products").find(".product-variation-price .price").removeClass("hidden");t.closest("ul.products").find(".product-variation-price .price-variation-new").addClass("hidden");i.closest(".glozin-product-pbt__lists").find(".product-variation-price").removeClass("active");i.closest(".glozin-product-pbt__lists").find(".product-variation-price .price").removeClass("hidden");i.closest(".glozin-product-pbt__lists").find(".product-variation-price .price-variation-new").addClass("hidden");_.text(0)}}else{if(C!==0&&w<=M.length){if(z.hasClass("hidden")){z.removeClass("hidden")}t.closest("ul.products").find(".product-variation-price").addClass("active");t.closest("ul.products").find(".product-variation-price .price").addClass("hidden");t.closest("ul.products").find(".product-variation-price .price-variation-new").removeClass("hidden");i.closest(".glozin-product-pbt__lists").find(".product-variation-price").addClass("active");i.closest(".glozin-product-pbt__lists").find(".product-variation-price .price").addClass("hidden");i.closest(".glozin-product-pbt__lists").find(".product-variation-price .price-variation-new").removeClass("hidden");c.addClass("ins");r.removeClass("hidden")}else{if(!z.hasClass("hidden")){z.addClass("hidden")}t.closest("ul.products").find(".product-variation-price").removeClass("active");t.closest("ul.products").find(".product-variation-price .price").removeClass("hidden");t.closest("ul.products").find(".product-variation-price .price-variation-new").addClass("hidden");i.closest(".glozin-product-pbt__lists").find(".product-variation-price").removeClass("active");i.closest(".glozin-product-pbt__lists").find(".product-variation-price .price").removeClass("hidden");i.closest(".glozin-product-pbt__lists").find(".product-variation-price .price-variation-new").addClass("hidden");c.removeClass("ins");r.addClass("hidden")}}b.attr("data-price",F);l.html(q(F));g.attr("data-price",x);d.html(q(x));v.attr("data-price",x-F);m.attr("data-price",x-F);n.html(q(x-F));e.find("#glozin-data_price").attr("data-price",x-F);z.find(".woocommerce-Price-amount").html(q(x-(x-F)))}function e(){S("#glozin-product-pbt").find(".variations_form").on("change","select",function(t){var i=S(this),s=S("option:selected",this),e=s.data("attributes"),a=i.closest("form").attr("data-product_id"),o=null,r=null;if(i.closest(".glozin-product-pbt__products").length>0){o=i.closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find('.product-select--list[data-id="'+a+'"] .variations_form select');r=i.closest(".glozin-product-pbt__products").siblings(".glozin-product-pbt__lists").find('.product-select--list[data-id="'+a+'"] .variations_form')}else{o=i.closest(".glozin-product-pbt__lists").siblings(".glozin-product-pbt__products").find("#pbt-product-"+a+" .variations_form select");r=i.closest(".glozin-product-pbt__lists").siblings(".glozin-product-pbt__products").find("#pbt-product-"+a+" .variations_form")}o.find("option").each(function(){var t=S(this).data("attributes");if(t!==undefined){if(JSON.stringify(t)===JSON.stringify(e)){for(var i in t){r.find('input[name="'+i+'"]').val(e[i])}S(this).prop("selected",true)}}else{r.find("input").val("")}});N()})}function N(t=S("#glozin-product-pbt")){var i=t.find("ul.products"),s=t.find(".glozin-pbt-alert"),e="",a=false;i.find("li.product").each(function(){var t=S(this),i=t.attr("data-type");if(!t.find(".product-select").hasClass("uncheck")&&i=="variable"&&(!t.find(".variation-attribute").first().val()||t.hasClass("out-of-stock"))){a=true;if(e){e+=", "}e+=t.attr("data-name")}});if(a){if(s.hasClass("hidden")){s.removeClass("hidden")}s.html(glozinPbt.alert.replace("[name]","<strong>"+e+"</strong>"));S(document).trigger("glozin_pbt_check_ready",[false,a,t])}else{if(!s.hasClass("hidden")){s.addClass("hidden")}s.html("");S(document).trigger("glozin_pbt_check_ready",[true,a,t])}M()}function M(){var t=S("#glozin-product-pbt"),i=t.find("ul.products"),s=parseFloat(t.find("#glozin-data_price").attr("data-price")),e=parseFloat(t.find(".glozin_product_id").val()),a=parseFloat(t.find(".glozin_variation_id").val()),o=t.find(".glozin-pbt-add-to-cart");if(parseFloat(t.find(".product-select.product-current .s-price").attr("data-price"))==0){o.addClass("disabled")}else{if(s==0||e==0&&a==0){o.addClass("disabled")}else{o.removeClass("disabled")}}var r=i.find("li.product.product-primary"),d=r.attr("data-type");if(d=="variable"&&(!r.find(".variation-attribute").first().val()||r.hasClass("out-of-stock"))){o.addClass("disabled")}}function q(t){var i=glozinPbt.currency_symbol,s=glozinPbt.thousand_sep,e=glozinPbt.decimal_sep,a=glozinPbt.price_decimals,o=glozinPbt.currency_pos,r=t;if(parseInt(a)>-1){t=t.toFixed(a)+"";var d=t.split(".");var c=d[0],n=d.length>1?e+d[1]:"";if(s){var l=/(\d+)(\d{3})/;while(l.test(c)){c=c.replace(l,"$1"+s+"$2")}}r=c+n}switch(o){case"left":return i+r;break;case"right":return r+i;break;case"left_space":return i+" "+r;break;case"right_space":return r+" "+i;break}}function D(t,i){var s=t>=0?1:-1;return parseFloat((Math.round(t*Math.pow(10,i)+s*1e-4)/Math.pow(10,i)).toFixed(i))}function a(){S(document).on("click",".glozin-pbt-add-to-cart",function(t){var r=S(this),i=r.closest("form.cart");if(r.is(".disabled")){return}if(i.length>0){t.preventDefault()}else{return}if(r.data("requestRunning")){return}r.data("requestRunning",true);var d=false;r.removeClass("added");r.addClass("loading");if(d){return}d=true;var s=i.serializeArray(),c=i.attr("action");var e={};if(r.hasClass("glozin-pbt-add-to-cart")){var a=r.closest("form").find(".glozin_product_id").val(),o=r.closest("form").find(".glozin_current_product_id").val();e=s;if(a>0){e.push({name:"glozin-pbt-add-to-cart-ajax",value:a})}else{e.push({name:"glozin-pbt-add-to-cart-ajax",value:o});var n=r.val().substring(0,r.val().indexOf(","))?r.val().substring(0,r.val().indexOf(",")):r.val();e.push({name:"variation_id",value:n})}s.push({name:r.attr("name"),value:r.val()})}S(document.body).trigger("adding_to_cart",[r,s]);var l="";if(typeof glozinData!=="undefined"){l=glozinData.ajax_url}else if(typeof wc_add_to_cart_params!=="undefined"){l=wc_add_to_cart_params.wc_ajax_url}if(!l){return}S(document.body).trigger("glozin_progress_bar_start");S.ajax({url:l.toString().replace("%%endpoint%%","add_to_cart_ajax"),method:"post",data:e,error:function(t){window.location=c},success:function(t){if(!t){window.location=c}if(typeof wc_add_to_cart_params!=="undefined"){if(wc_add_to_cart_params.cart_redirect_after_add==="yes"){window.location=wc_add_to_cart_params.cart_url;return}}if(!t.error){S(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,r])}else{r.removeClass("loading")}if(S.fn.notify&&t.error){var i='<span class="glozin-svg-icon message-icon"><svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px"><path d="M 25 2 C 12.309295 2 2 12.309295 2 25 C 2 37.690705 12.309295 48 25 48 C 37.690705 48 48 37.690705 48 25 C 48 12.309295 37.690705 2 25 2 z M 25 4 C 36.609824 4 46 13.390176 46 25 C 46 36.609824 36.609824 46 25 46 C 13.390176 46 4 36.609824 4 25 C 4 13.390176 13.390176 4 25 4 z M 25 11 A 3 3 0 0 0 22 14 A 3 3 0 0 0 25 17 A 3 3 0 0 0 28 14 A 3 3 0 0 0 25 11 z M 21 21 L 21 23 L 22 23 L 23 23 L 23 36 L 22 36 L 21 36 L 21 38 L 22 38 L 23 38 L 27 38 L 28 38 L 29 38 L 29 36 L 28 36 L 27 36 L 27 21 L 26 21 L 22 21 L 21 21 z"/></svg></span>',s='<span class="glozin-svg-icon svg-active"><svg class="svg-icon" aria-hidden="true" role="img" focusable="false" width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M14 1L1 14M1 1L14 14" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path></svg></span>',e="error",a=t.error,o='<a href="'+glozinATCA.view_cart_link+'" class="btn-button">'+glozinATCA.view_cart_text+"</a>";S.notify.addStyle("glozin",{html:"<div>"+i+'<div class="message-box">'+a+"</div>"+s+"</div>"});S.notify("&nbsp",{autoHideDelay:5e3,className:e,style:"glozin",showAnimation:"fadeIn",hideAnimation:"fadeOut"})}S(document.body).trigger("glozin_progress_bar_complete");r.data("requestRunning",false);d=false},complete:function(){S(document.body).on("added_to_cart wc_fragments_refreshed",function(){S(document.body).trigger("glozin_progress_bar_complete")})}})})}S(function(){if(typeof glozinPbt==="undefined"){return false}if(!S("body").hasClass("single-product")){return}var t=S("#glozin-product-pbt");if(t.length<=0){return}S(window).on("load",function(){t.find('select[name="variation_id"] option').prop("selected",function(){return this.defaultSelected})});a();M();i();setTimeout(()=>{N()},10);s();e()})})(jQuery);